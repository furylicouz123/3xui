# ðŸš€ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ VPN ÑÐµÑ€Ð²ÐµÑ€Ð° Ñ Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚Ð¾Ð¼

## ðŸ“‹ Ð§Ñ‚Ð¾ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚

- **Nginx** - Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€ Ð¸ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐºÑÐ¸
- **3X-UI** - Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ VPN (VLESS, VMess, Trojan)
- **Ð’ÐµÐ±-ÑÐ°Ð¹Ñ‚ terminaus.ru** - ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÐ°Ð¹Ñ‚
- **SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹** Ð´Ð»Ñ Ð¾Ð±Ð¾Ð¸Ñ… Ð´Ð¾Ð¼ÐµÐ½Ð¾Ð²
- **Docker Compose** Ð´Ð»Ñ Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸

## ðŸ”§ Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

### 1. ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€

```bash
# ÐœÐµÑ‚Ð¾Ð´ 1: SCP (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
scp -r c:\load\vpn_page\* root@185.221.153.162:/root/vpn_server/

# ÐœÐµÑ‚Ð¾Ð´ 2: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ð²Ð° Ð¸ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
tar -czf vpn_server.tar.gz -C c:\load\vpn_page .
scp vpn_server.tar.gz root@185.221.153.162:/root/
ssh root@185.221.153.162 "cd /root && tar -xzf vpn_server.tar.gz && rm vpn_server.tar.gz"

# ÐœÐµÑ‚Ð¾Ð´ 3: Rsync (ÐµÑÐ»Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½)
rsync -avz --progress c:/load/vpn_page/ root@185.221.153.162:/root/vpn_server/
```

### 2. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

```bash
# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
ssh root@185.221.153.162

# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd /root/vpn_server

# Ð—Ð°Ð¿ÑƒÑÐº Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
chmod +x install.sh
./install.sh
```

### 3. Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚ ÑÐºÑ€Ð¸Ð¿Ñ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

1. âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð° root
2. ðŸ³ Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Docker Ð¸ Docker Compose
3. ðŸ“ Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
4. ðŸ” Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹:
   - Ð”Ð»Ñ 3X-UI Ð¿Ð°Ð½ÐµÐ»Ð¸ (Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½)
   - Ð”Ð»Ñ terminaus.ru
5. ðŸ”¥ ÐÐ°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ firewall (UFW)
6. âš™ï¸ ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð´Ð»Ñ VPN
7. ðŸš€ Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹

### 4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS Ð·Ð°Ð¿Ð¸ÑÐµÐ¹

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ A-Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² DNS:
```
terminaus.ru        A    185.221.153.162
www.terminaus.ru    A    185.221.153.162
panel.your-domain.com A  185.221.153.162  # Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½
```

## ðŸŒ Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼

### Ð’ÐµÐ±-ÑÐ°Ð¹Ñ‚ terminaus.ru
- **URL**: https://terminaus.ru
- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: Ð¡Ñ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚
- **Ð¤Ð°Ð¹Ð»Ñ‹**: `/root/vpn_server/website/`

### 3X-UI ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
- **URL**: https://panel.your-domain.com (Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½)
- **Ð›Ð¾Ð³Ð¸Ð½**: `admin`
- **ÐŸÐ°Ñ€Ð¾Ð»ÑŒ**: `admin`
- âš ï¸ **Ð’Ð°Ð¶Ð½Ð¾**: Ð¡Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð²Ñ…Ð¾Ð´Ð°!

## ðŸ› ï¸ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð¼

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Makefile

```bash
# Ð—Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
make up

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
make down

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº
make restart

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
make logs

# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚Ð°
make website-update

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð¿Ð¸Ð¸
make backup

# Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
make ssl-gen

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ð¼
make shell-nginx    # Nginx
make shell-xui      # 3X-UI
make shell-website  # Ð’ÐµÐ±-ÑÐ°Ð¹Ñ‚
```

### Ð ÑƒÑ‡Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Docker Compose

```bash
# Ð—Ð°Ð¿ÑƒÑÐº
docker-compose up -d

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
docker-compose down

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
docker-compose ps

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
docker-compose logs -f

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°
docker-compose restart website
docker-compose restart nginx
docker-compose restart xui
```

## ðŸ”’ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSL Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Let's Encrypt

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Certbot
apt update && apt install -y certbot

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Nginx Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾
docker-compose stop nginx

# ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
certbot certonly --standalone -d terminaus.ru -d www.terminaus.ru
certbot certonly --standalone -d panel.your-domain.com

# ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
cp /etc/letsencrypt/live/terminaus.ru/fullchain.pem ssl/terminaus.ru.crt
cp /etc/letsencrypt/live/terminaus.ru/privkey.pem ssl/terminaus.ru.key
cp /etc/letsencrypt/live/panel.your-domain.com/fullchain.pem ssl/cert.pem
cp /etc/letsencrypt/live/panel.your-domain.com/privkey.pem ssl/key.pem

# Ð—Ð°Ð¿ÑƒÑÐº Nginx
docker-compose start nginx
```

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
cat > /root/renew-certs.sh << 'EOF'
#!/bin/bash
cd /root/vpn_server
docker-compose stop nginx
certbot renew --quiet
cp /etc/letsencrypt/live/terminaus.ru/fullchain.pem ssl/terminaus.ru.crt
cp /etc/letsencrypt/live/terminaus.ru/privkey.pem ssl/terminaus.ru.key
cp /etc/letsencrypt/live/panel.your-domain.com/fullchain.pem ssl/cert.pem
cp /etc/letsencrypt/live/panel.your-domain.com/privkey.pem ssl/key.pem
docker-compose start nginx
EOF

chmod +x /root/renew-certs.sh

# Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð² crontab (Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 2 Ð¼ÐµÑÑÑ†Ð°)
echo "0 3 1 */2 * /root/renew-certs.sh" | crontab -
```

## ðŸ“ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚Ð°

### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð² ÑÐ°Ð¹Ñ‚Ð°

```bash
# ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
scp -r /path/to/new/website/* root@185.221.153.162:/root/vpn_server/website/

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð° Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚Ð°
ssh root@185.221.153.162 "cd /root/vpn_server && docker-compose restart website"
```

## ðŸ” ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð»Ð¾Ð³Ð¸

```bash
# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker-compose logs -f

# Ð›Ð¾Ð³Ð¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°
docker-compose logs -f nginx
docker-compose logs -f website
docker-compose logs -f xui

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker-compose ps

# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
docker stats
```

## ðŸš¨ Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ SSL
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
openssl x509 -in ssl/terminaus.ru.crt -text -noout
openssl x509 -in ssl/cert.pem -text -noout

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Nginx
docker-compose exec nginx nginx -t
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð¾Ð¼
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ñ€Ñ‚Ð¾Ð²
ss -tlnp | grep -E ':(80|443|2053)'

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° firewall
ufw status

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° DNS
nslookup terminaus.ru
nslookup panel.your-domain.com
```

### ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
```bash
docker-compose down
docker-compose up -d
```

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸: `docker-compose logs -f`
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ð¿Ð¾Ñ€Ñ‚Ñ‹ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹: `ufw status`
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ DNS Ð·Ð°Ð¿Ð¸ÑÐ¸
4. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹

---

âœ… **Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!** Ð’Ð°Ñˆ VPN ÑÐµÑ€Ð²ÐµÑ€ Ñ Ð²ÐµÐ±-ÑÐ°Ð¹Ñ‚Ð¾Ð¼ terminaus.ru Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ.